# 多摄像机导播系统使用指南

## 系统概述

本系统是一个基于3D场景重建的多摄像机导播系统，用于运动会开幕式等多相机拍摄场景。系统的主要功能包括：

1. 3D场景可视化：基于3DGS (Gaussian Splatting) 重建的场景模型
2. 人物跟踪与轨迹显示：可视化人物在场景中的移动路径
3. 相机关系分析：计算并显示人物与各摄像机的视觉关系
4. 自动推荐最佳拍摄角度：基于质量评分推荐最适合的相机视角
5. 模拟场景动态：用于演示和测试的人物移动模拟

## 系统架构

系统由以下部分组成：

- **前端UI**：基于React和Three.js的3D场景可视化和控制面板
- **3D渲染引擎**：使用Three.js进行场景、人物和相机关系的渲染
- **场景重建**：使用3DGS进行场景的离线重建
- **评分算法**：计算相机拍摄质量的实时评分机制

## 使用说明

### 1. 系统启动

```bash
# 启动前端UI
cd ui
npm start
```

默认情况下，系统将在 http://localhost:3000 启动。

### 2. 界面说明

系统界面分为以下几个部分：

- **控制面板**：显示当前相机、时间和人物信息
- **3D场景视图**：显示场景、人物和相机的3D可视化
- **相机列表**：显示所有相机及其与人物的关系

### 3. 基本操作

- **播放/暂停**：控制人物移动模拟
- **重置**：将人物重置到初始位置
- **相机切换**：点击相机列表中的相机卡片切换当前相机
- **场景导航**：在3D视图中使用鼠标拖拽、缩放和旋转场景

### 4. 相机关系解读

系统会计算并显示人物与各相机的关系：

- **可见性**：人物是否在相机视野内
- **拍摄距离**：相机到人物的距离
- **拍摄类型**：特写、中景或远景
- **质量评分**：综合考虑距离、角度和中心偏移的评分

### 5. 视觉指引

- **轨迹线**：橙色线条表示人物的移动轨迹
- **相机视锥体**：表示相机的拍摄范围
- **关系连线**：连接人物和相机，颜色表示拍摄质量
- **推荐标识**：黄色边框表示当前推荐的最佳相机

## 数据来源

系统使用以下数据源：

1. **场景数据**：由3DGS重建生成的点云和相机位姿
2. **人物数据**：
   - 测试模式下使用模拟生成的数据
   - 实际使用时可集成计算机视觉跟踪系统提供实时数据

## 系统配置

可以通过修改`SceneViewerTest.js`中的参数调整系统行为：

- `samplingDensity`：点云采样密度（影响性能和视觉质量）
- `maxPoints`：最大渲染点数
- `optimalDistance`：最佳拍摄距离

## 后续开发计划

1. **实时人物跟踪集成**：连接计算机视觉系统获取真实人物位置
2. **多人物同时跟踪**：支持多个人物目标的同时跟踪和优先级排序
3. **相机流媒体集成**：显示真实相机画面预览
4. **智能导播算法增强**：考虑构图、场景语义和叙事连续性
5. **场景结构优化**：提取更精确的场景结构线用于导航
6. **用户界面优化**：更直观的交互和控制方式

## 常见问题

**Q: 点云加载太慢怎么办？**
A: 调整`samplingDensity`和`maxPoints`参数，减少渲染点数量。

**Q: 如何添加新的相机位置？**
A: 在相机配置JSON文件中添加新的相机定义，包括位置、方向和其他参数。

**Q: 系统对硬件有什么要求？**
A: 建议使用配备独立显卡的计算机，以获得流畅的3D渲染体验。

## 技术支持

如有任何问题，请联系技术支持团队。 